<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.opencil.mapper.ProjectMapper">

    <insert id="addProject" parameterType="cn.opencil.po.Project">
        INSERT INTO t_project (topic, leader, subject, funding, application_date, start_date, deadline)
            VALUE (#{topic}, #{leader}, #{subject}, #{funding}, #{applicationDate}, #{startDate}, #{deadline})
    </insert>

    <delete id="deleteProject" parameterType="java.lang.Integer">
        DELETE
        FROM
            t_project,
            t_team_project,
            t_expenditure USING t_project
            LEFT JOIN t_team_project ON t_team_project.project_id = t_project.id
            LEFT JOIN t_expenditure ON t_expenditure.project_id = t_project.id
        WHERE
            t_project.id = #{id}
    </delete>

</mapper>
